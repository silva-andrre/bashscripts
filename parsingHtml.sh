#!/bin/bash

#################################################################
# Titulo        : Parsing HTML                                  #
# Versao        : 0.1                                           #
# Data          : 12/07/2020                                    #
# Homepage      : ansilva.com.br                                #
# Testado       : kali-rolling                                  #
#################################################################

if [ "$1" == "" ]
then
        echo "Modo de usar: $0 DOMINIO"
        echo "Exemplo: $0 google.com"
else
        echo -e "\033[0;35m============================================================================================================================\033[0m"
        echo " "
        echo -e "\e[1;32m       [+] Resolvendo URLs em: $1 \e[0m"
        echo " "
        echo -e "\033[0;35m============================================================================================================================\033[0m"
                wget -q $1
                grep "href" index.html | cut -d "/" -f 3 | grep "\." | cut -d '"' -f 1 | grep -v "<" | tee lista.txt
                for url in $(cat lista.txt);do host $url | grep "has address";done > $1.ip.txt
        echo -e "\033[0;35m============================================================================================================================\033[0m"
        echo " "
        echo -e "\e[1;32m       [+] Concluido: Salvando os resultados em: $1.ip.txt \e[0m"
        echo " "
        echo -e "\033[0;35m============================================================================================================================\033[0m"
        echo -e "ADDRESS \t\t\t IP "
        echo -e "\033[0;35m============================================================================================================================\033[0m"
                cat $1.ip.txt | cut -d " " -f 1,4 | column -s ' ' -t
fi
rm -rf index.html
rm -rf $1.ip.txt
